/*! For license information please see homa-sidebar.js.LICENSE.txt */
(()=>{"use strict";var e={56(e,n,t){e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72(e){var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},i=[],c=0;c<e.length;c++){var s=e[c],l=r.base?s[0]+r.base:s[0],u=a[l]||0,m="".concat(l," ").concat(u);a[l]=u+1;var d=t(m),f={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==d)n[d].references++,n[d].updater(f);else{var p=o(f,r);r.byIndex=c,n.splice(c,0,{identifier:m,updater:p,references:1})}i.push(m)}return i}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var c=t(a[i]);n[c].references--}for(var s=r(e,o),l=0;l<a.length;l++){var u=t(a[l]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}a=s}}},113(e){e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},162(e,n,t){var r=t(609),o=t(888),a="function"==typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n},i=o.useSyncExternalStore,c=r.useRef,s=r.useEffect,l=r.useMemo,u=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,n,t,r,o){var m=c(null);if(null===m.current){var d={hasValue:!1,value:null};m.current=d}else d=m.current;m=l(function(){function e(e){if(!s){if(s=!0,i=e,e=r(e),void 0!==o&&d.hasValue){var n=d.value;if(o(n,e))return c=n}return c=e}if(n=c,a(i,e))return n;var t=r(e);return void 0!==o&&o(n,t)?(i=e,n):(i=e,c=t)}var i,c,s=!1,l=void 0===t?null:t;return[function(){return e(n())},null===l?void 0:function(){return e(l())}]},[n,t,r,o]);var f=i(e,m[0],m[1]);return s(function(){d.hasValue=!0,d.value=f},[f]),u(f),f}},242(e,n,t){e.exports=t(162)},309(e,n,t){t.d(n,{A:()=>c});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,"/**\n * Homa Parallel UI Styles\n * CSS for the viewport squeeze logic and React sidebar\n */\n\n/* ========================================\n   1. Global Wrapper - Viewport Squeeze Engine\n   ======================================== */\n\n#homa-global-wrapper {\n    display: flex;\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 999999;\n}\n\n/* Site view container (Divi content) */\n#homa-site-view {\n    flex: 1 0 100%;\n    height: 100%;\n    overflow-y: auto;\n    overflow-x: hidden;\n    transition: flex-basis 0.6s cubic-bezier(0.65, 0, 0.35, 1);\n    will-change: flex-basis;\n    scrollbar-gutter: stable;\n}\n\n/* Sidebar container (React app) */\n#homa-sidebar-view {\n    flex: 0 0 0%;\n    background: #ffffff;\n    transition: flex-basis 0.6s cubic-bezier(0.65, 0, 0.35, 1);\n    border-left: 2px solid #eaeaea;\n    overflow: hidden;\n    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);\n}\n\n/* Active state - when Homa is open */\nbody.homa-open #homa-site-view {\n    flex-basis: 70%;\n}\n\nbody.homa-open #homa-sidebar-view {\n    flex-basis: 30%;\n}\n\n/* Fix Divi header in compressed state */\nbody.homa-open #main-header,\nbody.homa-open .et-fixed-header {\n    width: 70% !important;\n    left: 0 !important;\n}\n\n/* ========================================\n   2. Sidebar Component Styles\n   ======================================== */\n\n.homa-sidebar-container {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%);\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n}\n\n/* Sidebar Header */\n.homa-sidebar-header {\n    display: flex;\n    align-items: center;\n    padding: 20px;\n    border-bottom: 1px solid #e0e0e0;\n    background: #ffffff;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.homa-avatar {\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: 12px;\n}\n\n.homa-avatar-icon {\n    font-size: 24px;\n}\n\n.homa-header-text h3 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n    color: #333;\n}\n\n.homa-header-text p {\n    margin: 4px 0 0;\n    font-size: 13px;\n    color: #666;\n}\n\n.homa-close-btn {\n    margin-right: auto;\n    background: none;\n    border: none;\n    font-size: 24px;\n    cursor: pointer;\n    color: #666;\n    padding: 8px;\n    line-height: 1;\n    transition: color 0.2s;\n}\n\n.homa-close-btn:hover {\n    color: #333;\n}\n\n/* Sidebar Content (Messages) */\n.homa-sidebar-content {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    direction: rtl;\n}\n\n.homa-message-list {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n/* Individual Message */\n.homa-message {\n    max-width: 85%;\n    animation: messageSlideIn 0.3s ease-out;\n}\n\n@keyframes messageSlideIn {\n    from {\n        opacity: 0;\n        transform: translateY(10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.homa-message-user {\n    align-self: flex-start;\n}\n\n.homa-message-assistant {\n    align-self: flex-end;\n}\n\n.homa-message-content {\n    padding: 12px 16px;\n    border-radius: 12px;\n    font-size: 14px;\n    line-height: 1.6;\n    word-wrap: break-word;\n}\n\n.homa-message-user .homa-message-content {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: #ffffff;\n    border-bottom-left-radius: 4px;\n}\n\n.homa-message-assistant .homa-message-content {\n    background: #f0f0f0;\n    color: #333;\n    border-bottom-right-radius: 4px;\n}\n\n.homa-message-time {\n    font-size: 11px;\n    color: #999;\n    margin-top: 4px;\n    text-align: left;\n}\n\n.homa-message-user .homa-message-time {\n    text-align: right;\n}\n\n/* Streaming cursor */\n.homa-cursor {\n    display: inline-block;\n    animation: blink 1s infinite;\n    margin-right: 2px;\n}\n\n@keyframes blink {\n    0%, 50% { opacity: 1; }\n    51%, 100% { opacity: 0; }\n}\n\n/* ========================================\n   3. Smart Chips\n   ======================================== */\n\n.homa-smart-chips {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    padding: 12px 20px;\n    border-top: 1px solid #e0e0e0;\n    background: #fafafa;\n}\n\n.homa-chip {\n    padding: 8px 16px;\n    background: #ffffff;\n    border: 1px solid #e0e0e0;\n    border-radius: 20px;\n    font-size: 13px;\n    cursor: pointer;\n    transition: all 0.2s;\n    color: #555;\n}\n\n.homa-chip:hover {\n    background: #667eea;\n    color: #ffffff;\n    border-color: #667eea;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n/* ========================================\n   4. Chat Input\n   ======================================== */\n\n.homa-chat-input {\n    display: flex;\n    align-items: flex-end;\n    gap: 8px;\n    padding: 16px 20px;\n    border-top: 1px solid #e0e0e0;\n    background: #ffffff;\n}\n\n.homa-chat-input textarea {\n    flex: 1;\n    padding: 12px;\n    border: 1px solid #e0e0e0;\n    border-radius: 12px;\n    font-size: 14px;\n    font-family: inherit;\n    resize: none;\n    outline: none;\n    transition: border-color 0.2s;\n}\n\n.homa-chat-input textarea:focus {\n    border-color: #667eea;\n}\n\n.homa-send-btn {\n    width: 44px;\n    height: 44px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border: none;\n    border-radius: 50%;\n    color: #ffffff;\n    font-size: 20px;\n    cursor: pointer;\n    transition: transform 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.homa-send-btn:hover:not(:disabled) {\n    transform: scale(1.1);\n}\n\n.homa-send-btn:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/* ========================================\n   5. Action Execution Animations\n   ======================================== */\n\n/* Pulse animation for highlighted elements */\n@keyframes homa-pulse {\n    0%, 100% {\n        box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7);\n        border-color: transparent;\n    }\n    50% {\n        box-shadow: 0 0 0 15px rgba(102, 126, 234, 0);\n        border-color: #667eea;\n    }\n}\n\n.homa-pulse {\n    animation: homa-pulse 1.5s ease-in-out 2;\n    border: 2px solid #667eea !important;\n    outline: 2px solid #667eea;\n    outline-offset: 2px;\n}\n\n/* ========================================\n   6. Mobile Responsiveness\n   ======================================== */\n\n@media (max-width: 768px) {\n    /* Mobile: Sidebar as bottom sheet */\n    #homa-global-wrapper {\n        flex-direction: column;\n    }\n\n    body.homa-open #homa-site-view {\n        flex-basis: 60%;\n    }\n\n    body.homa-open #homa-sidebar-view {\n        flex-basis: 40%;\n        border-left: none;\n        border-top: 2px solid #eaeaea;\n    }\n\n    body.homa-open #main-header,\n    body.homa-open .et-fixed-header {\n        width: 100% !important;\n    }\n}\n\n@media (max-width: 480px) {\n    body.homa-open #homa-site-view {\n        flex-basis: 50%;\n    }\n\n    body.homa-open #homa-sidebar-view {\n        flex-basis: 50%;\n    }\n\n    .homa-message {\n        max-width: 90%;\n    }\n\n    .homa-smart-chips {\n        flex-direction: column;\n    }\n\n    .homa-chip {\n        width: 100%;\n        text-align: center;\n    }\n}\n\n/* ========================================\n   7. Accessibility\n   ======================================== */\n\n.homa-sidebar-container *:focus {\n    outline: 2px solid #667eea;\n    outline-offset: 2px;\n}\n\n/* Reduced motion for users who prefer it */\n@media (prefers-reduced-motion: reduce) {\n    #homa-site-view,\n    #homa-sidebar-view,\n    .homa-message,\n    .homa-chip,\n    .homa-send-btn {\n        animation: none;\n        transition: none;\n    }\n}\n",""]);const c=i},314(e){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(i[s]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),t&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=t):u[2]=t),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),n.push(u))}},n}},338(e,n,t){var r=t(795);r.createRoot,r.hydrateRoot},493(e,n,t){var r=t(609),o="function"==typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n},a=r.useState,i=r.useEffect,c=r.useLayoutEffect,s=r.useDebugValue;function l(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!o(e,t)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,n){return n()}:function(e,n){var t=n(),r=a({inst:{value:t,getSnapshot:n}}),o=r[0].inst,u=r[1];return c(function(){o.value=t,o.getSnapshot=n,l(o)&&u({inst:o})},[e,t,n]),i(function(){return l(o)&&u({inst:o}),e(function(){l(o)&&u({inst:o})})},[e]),s(t),t};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},540(e){e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601(e){e.exports=function(e){return e[1]}},609(e){e.exports=window.React},659(e){var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},738(e,n,t){t.d(n,{A:()=>c});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,'/**\n * Explore Widget Styles\n * Instagram-like recommendation cards\n * \n * @package HomayeTabesh\n * @since PR10\n */\n\n.explore-widget {\n    width: 100%;\n    padding: 16px;\n    background: #f9f9f9;\n    border-radius: 8px;\n    margin-bottom: 16px;\n}\n\n.explore-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16px;\n}\n\n.explore-header h3 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n    color: #333;\n}\n\n.explore-refresh-btn {\n    background: transparent;\n    border: none;\n    font-size: 24px;\n    color: #667eea;\n    cursor: pointer;\n    padding: 4px 8px;\n    border-radius: 4px;\n    transition: all 0.2s ease;\n}\n\n.explore-refresh-btn:hover {\n    background: rgba(102, 126, 234, 0.1);\n    transform: rotate(180deg);\n}\n\n/* Loading state */\n.explore-loading {\n    text-align: center;\n    padding: 32px 16px;\n}\n\n.loading-spinner {\n    width: 40px;\n    height: 40px;\n    margin: 0 auto 16px;\n    border: 4px solid #f3f3f3;\n    border-top: 4px solid #667eea;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.explore-loading p {\n    color: #666;\n    font-size: 14px;\n}\n\n/* Error state */\n.explore-error {\n    text-align: center;\n    padding: 24px 16px;\n}\n\n.explore-error p {\n    color: #d32f2f;\n    margin-bottom: 16px;\n}\n\n.retry-btn {\n    background: #667eea;\n    color: white;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 14px;\n    transition: background 0.2s ease;\n}\n\n.retry-btn:hover {\n    background: #5568d3;\n}\n\n/* Empty state */\n.explore-empty {\n    text-align: center;\n    padding: 24px 16px;\n    color: #666;\n}\n\n.explore-hint {\n    font-size: 13px;\n    color: #999;\n    margin-top: 8px;\n}\n\n/* Category filter */\n.explore-categories {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 16px;\n    overflow-x: auto;\n    padding-bottom: 8px;\n}\n\n.explore-categories::-webkit-scrollbar {\n    height: 4px;\n}\n\n.explore-categories::-webkit-scrollbar-thumb {\n    background: #ccc;\n    border-radius: 2px;\n}\n\n.category-btn {\n    padding: 6px 12px;\n    background: white;\n    border: 1px solid #e0e0e0;\n    border-radius: 20px;\n    font-size: 13px;\n    color: #666;\n    cursor: pointer;\n    white-space: nowrap;\n    transition: all 0.2s ease;\n}\n\n.category-btn:hover {\n    border-color: #667eea;\n    color: #667eea;\n}\n\n.category-btn.active {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border-color: transparent;\n}\n\n/* Recommendation cards */\n.explore-cards {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.explore-card {\n    background: white;\n    border-radius: 12px;\n    overflow: hidden;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n    transition: all 0.3s ease;\n    position: relative;\n}\n\n.explore-card:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n}\n\n.card-image {\n    width: 100%;\n    height: 140px;\n    overflow: hidden;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    position: relative;\n}\n\n.card-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.3s ease;\n}\n\n.explore-card:hover .card-image img {\n    transform: scale(1.1);\n}\n\n/* Placeholder for cards without images */\n.explore-card:not(:has(.card-image)) .card-content {\n    padding-top: 16px;\n}\n\n.card-content {\n    padding: 12px;\n}\n\n.card-category {\n    display: inline-block;\n    background: rgba(102, 126, 234, 0.1);\n    color: #667eea;\n    font-size: 11px;\n    padding: 4px 8px;\n    border-radius: 4px;\n    margin-bottom: 8px;\n    font-weight: 600;\n}\n\n.card-title {\n    margin: 0 0 8px 0;\n    font-size: 15px;\n    font-weight: 600;\n    color: #333;\n    line-height: 1.3;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n}\n\n.card-description {\n    margin: 0 0 12px 0;\n    font-size: 13px;\n    color: #666;\n    line-height: 1.5;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n}\n\n.card-reason {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 12px;\n    color: #999;\n    padding-top: 8px;\n    border-top: 1px solid #f0f0f0;\n}\n\n.reason-icon {\n    font-size: 14px;\n}\n\n.reason-text {\n    flex: 1;\n}\n\n/* RTL Support */\n[dir="rtl"] .explore-widget {\n    direction: rtl;\n    text-align: right;\n}\n\n/* Mobile optimizations */\n@media (max-width: 768px) {\n    .explore-widget {\n        padding: 12px;\n    }\n\n    .explore-header h3 {\n        font-size: 16px;\n    }\n\n    .card-image {\n        height: 120px;\n    }\n\n    .card-title {\n        font-size: 14px;\n    }\n\n    .card-description {\n        font-size: 12px;\n    }\n\n    .explore-categories {\n        gap: 6px;\n    }\n\n    .category-btn {\n        padding: 5px 10px;\n        font-size: 12px;\n    }\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n    .explore-card {\n        border: 2px solid #333;\n    }\n\n    .card-category {\n        background: #667eea;\n        color: white;\n    }\n\n    .category-btn {\n        border-width: 2px;\n    }\n}\n\n/* Reduced motion */\n@media (prefers-reduced-motion: reduce) {\n    .explore-card,\n    .card-image img,\n    .loading-spinner,\n    .explore-refresh-btn {\n        animation: none !important;\n        transition: none !important;\n    }\n\n    .explore-card:hover {\n        transform: none;\n    }\n}\n\n/* Dark mode support (if needed in future) */\n@media (prefers-color-scheme: dark) {\n    .explore-widget {\n        background: #2a2a2a;\n    }\n\n    .explore-card {\n        background: #333;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n    }\n\n    .explore-header h3,\n    .card-title {\n        color: #fff;\n    }\n\n    .card-description,\n    .explore-loading p,\n    .explore-empty {\n        color: #ccc;\n    }\n\n    .category-btn {\n        background: #444;\n        border-color: #555;\n        color: #ccc;\n    }\n\n    .category-btn:hover {\n        border-color: #667eea;\n        color: #667eea;\n    }\n}\n',""]);const c=i},795(e){e.exports=window.ReactDOM},825(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},888(e,n,t){e.exports=t(493)}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var r=t(609),o=t.n(r);t(338);const a=e=>{let n;const t=new Set,r=(e,r)=>{const o="function"==typeof e?e(n):e;if(!Object.is(o,n)){const e=n;n=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},n,o),t.forEach(t=>t(n,e))}},o=()=>n,a={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{"production"!=={NODE_ENV:"production"}.MODE&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},i=n=e(r,o,a);return a};var i=t(242);const{useDebugValue:c}=r,{useSyncExternalStoreWithSelector:s}=i;let l=!1;const u=e=>e,m=e=>{"production"!=={NODE_ENV:"production"}.MODE&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n="function"==typeof e?(e=>e?a(e):a)(e):e,t=(e,t)=>function(e,n=u,t){"production"!=={NODE_ENV:"production"}.MODE&&t&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);const r=s(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,t);return c(r),r}(n,e,t);return Object.assign(t,n),t};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach(function(n){h(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function h(e,n,t){return(n=function(e){var n=function(e){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=d(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return g(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var v,y=(v=function(e){return{messages:[],userPersona:null,isTyping:!1,sidebarOpen:!1,leadData:null,otpState:{stage:"idle",phoneNumber:null,expiresIn:120},isAuthenticated:!1,currentUser:null,addMessage:function(n){return e(function(e){return{messages:[].concat(b(e.messages),[n])}})},clearMessages:function(){return e({messages:[]})},setUserPersona:function(n){return e({userPersona:n})},setIsTyping:function(n){return e({isTyping:n})},setSidebarOpen:function(n){return e({sidebarOpen:n})},updateLastMessage:function(n){return e(function(e){var t=b(e.messages);return t.length>0&&(t[t.length-1]=p(p({},t[t.length-1]),n)),{messages:t}})},setLeadData:function(n){return e({leadData:n})},updateLeadData:function(n){return e(function(e){return{leadData:p(p({},e.leadData),n)}})},setOTPStage:function(n){return e(function(e){return{otpState:p(p({},e.otpState),{},{stage:n})}})},setPhoneNumber:function(n){return e(function(e){return{otpState:p(p({},e.otpState),{},{phoneNumber:n})}})},setOTPExpiry:function(n){return e(function(e){return{otpState:p(p({},e.otpState),{},{expiresIn:n})}})},setAuthenticated:function(n){return e({isAuthenticated:n})},setCurrentUser:function(n){return e({currentUser:n,isAuthenticated:!!n})},resetOTP:function(){return e({otpState:{stage:"idle",phoneNumber:null,expiresIn:120}})}}})?m(v):m,w=function(e,n){(0,r.useEffect)(function(){if(window.Homa&&window.Homa.on)return window.Homa.on(e,n);console.warn("[Homa React Bridge] Event bus not available")},[e,n])},x=function(){return(0,r.useCallback)(function(e,n){window.Homa&&window.Homa.emit?window.Homa.emit(e,n):console.warn("[Homa React Bridge] Event bus not available")},[])};function E(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return S(l,"_invoke",function(t,r,o){var a,c,s,l=0,u=o||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,c=0,s=e,d.n=t,i}};function f(t,r){for(c=t,s=r,n=0;!m&&l&&!o&&n<u.length;n++){var o,a=u[n],f=d.p,p=a[2];t>3?(o=p===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(c=0,d.v=r,d.n=a[1]):f<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,d.n=p,c=0))}if(o||t>1)return i;throw m=!0,r}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,s=p;(n=c<2?e:s)||!m;){a||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(l=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((n=(m=d.n<0)?s:t.call(r,d))!==i)break}catch(n){a=e,c=1,s=n}finally{l=1}}return{value:n,done:m}}}(t,o,a),!0),l}var i={};function c(){}function s(){}function l(){}n=Object.getPrototypeOf;var u=[][r]?n(n([][r]())):(S(n={},r,function(){return this}),n),m=l.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,S(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,S(m,"constructor",l),S(l,"constructor",s),s.displayName="GeneratorFunction",S(l,o,"GeneratorFunction"),S(m),S(m,o,"Generator"),S(m,r,function(){return this}),S(m,"toString",function(){return"[object Generator]"}),(E=function(){return{w:a,m:d}})()}function S(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}S=function(e,n,t,r){function a(n,t){S(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},S(e,n,t,r)}function N(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,c=[],s=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(c.push(r.value),c.length!==n);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return O(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var j=function(e){var n=e.message,t=e.streamingDelay,a=void 0===t?20:t,i=k((0,r.useState)(""),2),c=i[0],s=i[1],l=k((0,r.useState)(!1),2),u=l[0],m=l[1];(0,r.useEffect)(function(){"assistant"!==n.type||c?"user"===n.type&&s(n.content):(m(!0),d(n.content))},[n.content]);var d=function(){var e,n=(e=E().m(function e(n){var t,r;return E().w(function(e){for(;;)switch(e.n){case 0:t=0,(r=function(){t<n.length?(s(function(e){return e+n[t]}),t++,setTimeout(r,a)):m(!1)})();case 1:return e.a(2)}},e)}),function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){N(a,r,o,i,c,"next",e)}function c(e){N(a,r,o,i,c,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}();return o().createElement("div",{className:"homa-message homa-message-".concat(n.type)},o().createElement("div",{className:"homa-message-content"},c||n.content,u&&o().createElement("span",{className:"homa-cursor"},"â–Š")),n.timestamp&&o().createElement("div",{className:"homa-message-time"},new Date(n.timestamp).toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"})))};const P=function(e){var n=e.messages,t=e.streamingDelay,r=void 0===t?20:t;return o().createElement("div",{className:"homa-message-list"},n.map(function(e){return o().createElement(j,{key:e.id,message:e,streamingDelay:r})}))};function A(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return T(l,"_invoke",function(t,r,o){var a,c,s,l=0,u=o||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,c=0,s=e,d.n=t,i}};function f(t,r){for(c=t,s=r,n=0;!m&&l&&!o&&n<u.length;n++){var o,a=u[n],f=d.p,p=a[2];t>3?(o=p===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(c=0,d.v=r,d.n=a[1]):f<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,d.n=p,c=0))}if(o||t>1)return i;throw m=!0,r}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,s=p;(n=c<2?e:s)||!m;){a||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(l=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((n=(m=d.n<0)?s:t.call(r,d))!==i)break}catch(n){a=e,c=1,s=n}finally{l=1}}return{value:n,done:m}}}(t,o,a),!0),l}var i={};function c(){}function s(){}function l(){}n=Object.getPrototypeOf;var u=[][r]?n(n([][r]())):(T(n={},r,function(){return this}),n),m=l.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,T(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,T(m,"constructor",l),T(l,"constructor",s),s.displayName="GeneratorFunction",T(l,o,"GeneratorFunction"),T(m),T(m,o,"Generator"),T(m,r,function(){return this}),T(m,"toString",function(){return"[object Generator]"}),(A=function(){return{w:a,m:d}})()}function T(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}T=function(e,n,t,r){function a(n,t){T(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},T(e,n,t,r)}function I(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function _(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,c=[],s=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(c.push(r.value),c.length!==n);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return H(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?H(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}const C=function(e){var n=e.onSendMessage,t=_((0,r.useState)(""),2),a=t[0],i=t[1],c=_((0,r.useState)(!1),2),s=c[0],l=c[1],u=function(){var e,t=(e=A().m(function e(t){return A().w(function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),a.trim()&&!s){e.n=1;break}return e.a(2);case 1:return l(!0),e.n=2,n(a.trim());case 2:i(""),l(!1);case 3:return e.a(2)}},e)}),function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){I(a,r,o,i,c,"next",e)}function c(e){I(a,r,o,i,c,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}();return o().createElement("form",{className:"homa-chat-input",onSubmit:u},o().createElement("textarea",{value:a,onChange:function(e){return i(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u(e))},placeholder:"Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...",rows:"2",disabled:s,dir:"rtl"}),o().createElement("button",{type:"submit",disabled:!a.trim()||s,className:"homa-send-btn","aria-label":"Ø§Ø±Ø³Ø§Ù„"},s?"...":"â¤"))},D=function(e){var n=e.persona,t=e.onChipClick,r=function(){if(!n)return[{id:"intro",label:"Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ú©Ù†",message:"Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ú©ØªØ§Ø¨Ù… Ø±Ø§ Ú†Ø§Ù¾ Ú©Ù†Ù…ØŒ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ú©Ù†"},{id:"price",label:"Ù‚ÛŒÙ…Øª Ú†Ø§Ù¾",message:"Ù‡Ø²ÛŒÙ†Ù‡ Ú†Ø§Ù¾ Ú©ØªØ§Ø¨ Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ"},{id:"quality",label:"Ú©ÛŒÙÛŒØª Ú†Ø§Ù¾",message:"Ø§Ù†ÙˆØ§Ø¹ Ú©Ø§ØºØ° Ùˆ Ú©ÛŒÙÛŒØª Ú†Ø§Ù¾ Ú†ÛŒØ³ØªØŸ"}];var e={Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡:[{id:"license",label:"Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø¬ÙˆØ² Ø¯Ø§Ø±Ù…",message:"Ø¨Ø±Ø§ÛŒ Ú†Ø§Ù¾ Ú©ØªØ§Ø¨Ù… Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø¬ÙˆØ² Ø¯Ø§Ø±Ù…"},{id:"copyright",label:"Ø´Ø§Ø¨Ú© Ùˆ Ø­Ù‚ Ù†Ø´Ø±",message:"Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø´Ø§Ø¨Ú© Ùˆ Ø­Ù‚ Ù†Ø´Ø± ØªÙˆØ¶ÛŒØ­ Ø¨Ø¯Ù‡"},{id:"print_type",label:"Ù†ÙˆØ¹ Ú†Ø§Ù¾ Ù…Ù†Ø§Ø³Ø¨",message:"Ú†Ù‡ Ù†ÙˆØ¹ Ú†Ø§Ù¾ÛŒ Ø¨Ø±Ø§ÛŒ Ú©ØªØ§Ø¨ Ù…Ù† Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª?"}],Ù†Ø§Ø´Ø±:[{id:"bulk",label:"Ú†Ø§Ù¾ Ø§Ù†Ø¨ÙˆÙ‡",message:"Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… ØªÛŒØ±Ø§Ú˜ Ø¨Ø§Ù„Ø§ Ú†Ø§Ù¾ Ú©Ù†Ù…"},{id:"discount",label:"ØªØ®ÙÛŒÙ Ø­Ø¬Ù…ÛŒ",message:"Ø¨Ø±Ø§ÛŒ Ú†Ø§Ù¾ Ø§Ù†Ø¨ÙˆÙ‡ ØªØ®ÙÛŒÙ Ø¯Ø§Ø±ÛŒØ¯ØŸ"},{id:"quality",label:"Ú©ÛŒÙÛŒØª ÙˆÛŒÚ˜Ù‡",message:"Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ú†Ø§Ù¾ Ø±Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù…"}],Ø¯Ø§Ù†Ø´Ø¬Ùˆ:[{id:"thesis",label:"Ú†Ø§Ù¾ Ù¾Ø§ÛŒØ§Ù†â€ŒÙ†Ø§Ù…Ù‡",message:"Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ù¾Ø§ÛŒØ§Ù†â€ŒÙ†Ø§Ù…Ù‡ Ú†Ø§Ù¾ Ú©Ù†Ù…"},{id:"fast",label:"Ú†Ø§Ù¾ ÙÙˆØ±ÛŒ",message:"Ø¨Ù‡ Ø³Ø±Ø¹Øª Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ù…"},{id:"budget",label:"Ù‚ÛŒÙ…Øª Ù…Ù†Ø§Ø³Ø¨",message:"Ø¯Ù†Ø¨Ø§Ù„ Ù‚ÛŒÙ…Øª Ù…Ù†Ø§Ø³Ø¨ Ù‡Ø³ØªÙ…"}],Ù…Ø¯ÛŒØ±:[{id:"catalog",label:"Ú†Ø§Ù¾ Ú©Ø§ØªØ§Ù„ÙˆÚ¯",message:"Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ú©Ø§ØªØ§Ù„ÙˆÚ¯ Ù…Ø­ØµÙˆÙ„Ø§Øª Ú†Ø§Ù¾ Ú©Ù†Ù…"},{id:"brochure",label:"Ø¨Ø±ÙˆØ´ÙˆØ± Ø´Ø±Ú©ØªÛŒ",message:"Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú†Ø§Ù¾ Ø¨Ø±ÙˆØ´ÙˆØ± Ø¯Ø§Ø±Ù…"},{id:"invoice",label:"Ú†Ø§Ù¾ Ø§ÙˆØ±Ø§Ù‚ Ø§Ø¯Ø§Ø±ÛŒ",message:"ÙØ§Ú©ØªÙˆØ± Ùˆ Ø³Ø±Ø¨Ø±Ú¯ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù…"}]};return e[n]||e["Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡"]}();return o().createElement("div",{className:"homa-smart-chips"},r.map(function(e){return o().createElement("button",{key:e.id,className:"homa-chip",onClick:function(){return t(e)}},e.label)}))};var M=t(72),z=t.n(M),R=t(825),G=t.n(R),U=t(659),F=t.n(U),L=t(56),W=t.n(L),V=t(540),q=t.n(V),B=t(113),$=t.n(B),J=t(738),X={};function Y(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return K(l,"_invoke",function(t,r,o){var a,c,s,l=0,u=o||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,c=0,s=e,d.n=t,i}};function f(t,r){for(c=t,s=r,n=0;!m&&l&&!o&&n<u.length;n++){var o,a=u[n],f=d.p,p=a[2];t>3?(o=p===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(c=0,d.v=r,d.n=a[1]):f<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,d.n=p,c=0))}if(o||t>1)return i;throw m=!0,r}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,s=p;(n=c<2?e:s)||!m;){a||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(l=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((n=(m=d.n<0)?s:t.call(r,d))!==i)break}catch(n){a=e,c=1,s=n}finally{l=1}}return{value:n,done:m}}}(t,o,a),!0),l}var i={};function c(){}function s(){}function l(){}n=Object.getPrototypeOf;var u=[][r]?n(n([][r]())):(K(n={},r,function(){return this}),n),m=l.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,K(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,K(m,"constructor",l),K(l,"constructor",s),s.displayName="GeneratorFunction",K(l,o,"GeneratorFunction"),K(m),K(m,o,"Generator"),K(m,r,function(){return this}),K(m,"toString",function(){return"[object Generator]"}),(Y=function(){return{w:a,m:d}})()}function K(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}K=function(e,n,t,r){function a(n,t){K(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},K(e,n,t,r)}function Q(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function Z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,c=[],s=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(c.push(r.value),c.length!==n);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,n)||ee(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,n){if(e){if("string"==typeof e)return ne(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ne(e,n):void 0}}function ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}X.styleTagTransform=$(),X.setAttributes=W(),X.insert=F().bind(null,"head"),X.domAPI=G(),X.insertStyleElement=q(),z()(J.A,X),J.A&&J.A.locals&&J.A.locals;const te=function(){var e=Z((0,r.useState)([]),2),n=e[0],t=e[1],a=Z((0,r.useState)(!0),2),i=a[0],c=a[1],s=Z((0,r.useState)(null),2),l=s[0],u=s[1],m=Z((0,r.useState)("all"),2),d=m[0],f=m[1],p=x();(0,r.useEffect)(function(){b()},[]),w("vault:interests_updated",function(e){console.log("[Explore Widget] Interests updated, refreshing recommendations"),b()}),w("page:navigate",function(e){console.log("[Explore Widget] Page navigation detected, updating recommendations"),b()});var h,b=function(){var e,n=(e=Y().m(function e(){var n,r,o,a,i;return Y().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,c(!0),u(null),null!==(n=window.homayeParallelUIConfig)&&void 0!==n&&n.nonce){e.n=1;break}throw new Error("Ù†Ø´Ø³Øª Ø´Ù…Ø§ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª");case 1:return e.n=2,fetch("/wp-json/homaye-tabesh/v1/vault/interests",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":window.homayeParallelUIConfig.nonce}});case 2:if((r=e.v).ok){e.n=3;break}throw new Error("Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª");case 3:return e.n=4,r.json();case 4:o=e.v,a=g(o.interests||[]),t(a),c(!1),p("explore:recommendations_loaded",{count:a.length}),e.n=6;break;case 5:e.p=5,i=e.v,console.error("[Explore Widget] Error loading recommendations:",i),u(i.message),c(!1);case 6:return e.a(2)}},e,null,[[0,5]])}),function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){Q(a,r,o,i,c,"next",e)}function c(e){Q(a,r,o,i,c,"throw",e)}i(void 0)})});return function(){return n.apply(this,arguments)}}(),g=function(e){if(!e||0===e.length)return N();var n={};e.forEach(function(e){var t=e.category||"Ø¹Ù…ÙˆÙ…ÛŒ";n[t]||(n[t]=[]),n[t].push(e)});var t=[];return Object.entries(n).forEach(function(e){var n=Z(e,2),r=n[0],o=n[1].sort(function(e,n){return n.score-e.score})[0];t.push({id:"rec-".concat(r,"-").concat(Date.now()),category:r,title:v(o),description:y(o),image:E(o),link:o.related_url||"#",score:o.score||.5,reason:S(o)})}),t.sort(function(e,n){return n.score-e.score})},v=function(e){return e.product_name?e.product_name:e.page_title?e.page_title:"Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ".concat(e.category||"ÙˆÛŒÚ˜Ù‡")},y=function(e){return e.description?e.description:e.context?e.context.substring(0,100)+"...":"Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¹Ù„Ø§ÛŒÙ‚ Ø´Ù…Ø§ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯"},E=function(e){var n;return e.thumbnail?e.thumbnail:(null===(n=window.homayeParallelUIConfig)||void 0===n?void 0:n.pluginUrl)+"/assets/images/placeholder.jpg"||0},S=function(e){var n=["Ú†ÙˆÙ† Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ø­ØªÙˆØ§ Ø¹Ù„Ø§Ù‚Ù‡ Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯ÛŒØ¯","Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¨Ø§Ø²Ø¯ÛŒØ¯Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ± Ø´Ù…Ø§","Ù…Ø­ØµÙˆÙ„ Ù…Ú©Ù…Ù„ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§","Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§","Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø§ÛŒÙ† Ø±Ø§ Ù‡Ù… Ø¯ÛŒØ¯Ù†Ø¯"],t=Math.floor(e.score*n.length);return n[Math.min(t,n.length-1)]},N=function(){return[{id:"default-1",category:"Ù…Ø­Ø¨ÙˆØ¨",title:"Ù…Ø­ØµÙˆÙ„Ø§Øª Ù¾Ø±ÙØ±ÙˆØ´",description:"Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙ† Ù…Ø§Ù‡",image:"",link:"/shop",score:1,reason:"Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø­Ø¨ÙˆØ¨"},{id:"default-2",category:"Ø¬Ø¯ÛŒØ¯",title:"ØªØ§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§ÛŒØª",description:"Ø¢Ø®Ø±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡",image:"",link:"/shop?orderby=date",score:.9,reason:"Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†â€ŒÙ‡Ø§"}]},k="all"===d?n:n.filter(function(e){return e.category===d}),O=["all"].concat(function(e){if(Array.isArray(e))return ne(e)}(h=new Set(n.map(function(e){return e.category})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(h)||ee(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return i?o().createElement("div",{className:"explore-widget"},o().createElement("div",{className:"explore-header"},o().createElement("h3",null,"ğŸ” Ø§Ú©Ø³Ù¾Ù„ÙˆØ±")),o().createElement("div",{className:"explore-loading"},o().createElement("div",{className:"loading-spinner"}),o().createElement("p",null,"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª..."))):l?o().createElement("div",{className:"explore-widget"},o().createElement("div",{className:"explore-header"},o().createElement("h3",null,"ğŸ” Ø§Ú©Ø³Ù¾Ù„ÙˆØ±")),o().createElement("div",{className:"explore-error"},o().createElement("p",null,"âš ï¸ ",l),o().createElement("button",{onClick:b,className:"retry-btn"},"ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯"))):0===n.length?o().createElement("div",{className:"explore-widget"},o().createElement("div",{className:"explore-header"},o().createElement("h3",null,"ğŸ” Ø§Ú©Ø³Ù¾Ù„ÙˆØ±")),o().createElement("div",{className:"explore-empty"},o().createElement("p",null,"Ù‡Ù†ÙˆØ² Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ù†Ø¯Ø§Ø±ÛŒÙ…"),o().createElement("p",{className:"explore-hint"},"Ú©Ù…ÛŒ Ø¯Ø± Ø³Ø§ÛŒØª Ø¨Ú¯Ø±Ø¯ÛŒØ¯ ØªØ§ Ø¨ØªÙˆØ§Ù†ÛŒÙ… Ø´Ù…Ø§ Ø±Ø§ Ø¨Ù‡ØªØ± Ø¨Ø´Ù†Ø§Ø³ÛŒÙ… ğŸ˜Š"))):o().createElement("div",{className:"explore-widget"},o().createElement("div",{className:"explore-header"},o().createElement("h3",null,"ğŸ” Ø§Ú©Ø³Ù¾Ù„ÙˆØ±"),o().createElement("button",{className:"explore-refresh-btn",onClick:b,title:"Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ"},"â†»")),O.length>2&&o().createElement("div",{className:"explore-categories"},O.map(function(e){return o().createElement("button",{key:e,className:"category-btn ".concat(d===e?"active":""),onClick:function(){return f(e)}},"all"===e?"Ù‡Ù…Ù‡":e)})),o().createElement("div",{className:"explore-cards"},k.map(function(e){return o().createElement("div",{key:e.id,className:"explore-card",onClick:function(){return function(e){p("explore:card_clicked",{cardId:e.id,category:e.category,title:e.title}),e.link&&"#"!==e.link&&(window.location.href=e.link)}(e)}},e.image&&o().createElement("div",{className:"card-image"},o().createElement("img",{src:e.image,alt:e.title})),o().createElement("div",{className:"card-content"},o().createElement("div",{className:"card-category"},e.category),o().createElement("h4",{className:"card-title"},e.title),o().createElement("p",{className:"card-description"},e.description),o().createElement("div",{className:"card-reason"},o().createElement("span",{className:"reason-icon"},"ğŸ’¡"),o().createElement("span",{className:"reason-text"},e.reason))))})),0===k.length&&"all"!==d&&o().createElement("div",{className:"explore-empty"},o().createElement("p",null,"Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯")))},re=function(e){var n=e.userContext;return o().createElement("div",{className:"homa-admin-tools"},o().createElement("div",{className:"homa-tools-header"},o().createElement("h4",null,"ğŸ›ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ"),o().createElement("span",{className:"homa-role-badge admin"},"Ù…Ø¯ÛŒØ±")),o().createElement("div",{className:"homa-tools-grid"},o().createElement("button",{className:"homa-tool-button analytics",onClick:function(){window.Homa&&window.Homa.emit&&window.Homa.emit("admin:show_stats",{period:"today"})},title:"Ù†Ù…Ø§ÛŒØ´ Ø¢Ù…Ø§Ø± Ùˆ Ú¯Ø²Ø§Ø±Ø´ ÙØ±ÙˆØ´ Ø§Ù…Ø±ÙˆØ²"},o().createElement("span",{className:"homa-tool-icon"},"ğŸ“Š"),o().createElement("span",{className:"homa-tool-label"},"Ø¢Ù…Ø§Ø± Ø§Ù…Ø±ÙˆØ²")),o().createElement("button",{className:"homa-tool-button users",onClick:function(){window.Homa&&window.Homa.emit&&window.Homa.emit("admin:show_online_users",{})},title:"Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¢Ù†Ù„Ø§ÛŒÙ† Ùˆ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§"},o().createElement("span",{className:"homa-tool-icon"},"ğŸ‘¥"),o().createElement("span",{className:"homa-tool-label"},"Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¢Ù†Ù„Ø§ÛŒÙ†")),o().createElement("button",{className:"homa-tool-button security",onClick:function(){window.Homa&&window.Homa.emit&&window.Homa.emit("admin:show_security_alerts",{})},title:"Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ùˆ ØªØ´Ø®ÛŒØµ Ù…Ù‡Ø§Ø¬Ù…"},o().createElement("span",{className:"homa-tool-icon"},"ğŸ›¡ï¸"),o().createElement("span",{className:"homa-tool-label"},"Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ")),o().createElement("a",{href:"/wp-admin/admin.php?page=homa-atlas",className:"homa-tool-button atlas",title:"Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø·Ù„Ø³"},o().createElement("span",{className:"homa-tool-icon"},"âš¡"),o().createElement("span",{className:"homa-tool-label"},"Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø·Ù„Ø³"))),o().createElement("div",{className:"homa-admin-summary"},o().createElement("p",{className:"homa-welcome-admin"},"Ø³Ù„Ø§Ù… ",null==n?void 0:n.identity," Ø¹Ø²ÛŒØ²! ğŸ‘‹",o().createElement("br",null),"Ù…Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒØŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆØ± Ùˆ Ø±ÙØªØ§Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ ØªØ­Ù„ÛŒÙ„ Ú©Ù†Ù….")))};function oe(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return ae(l,"_invoke",function(t,r,o){var a,c,s,l=0,u=o||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,c=0,s=e,d.n=t,i}};function f(t,r){for(c=t,s=r,n=0;!m&&l&&!o&&n<u.length;n++){var o,a=u[n],f=d.p,p=a[2];t>3?(o=p===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(c=0,d.v=r,d.n=a[1]):f<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,d.n=p,c=0))}if(o||t>1)return i;throw m=!0,r}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,s=p;(n=c<2?e:s)||!m;){a||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(l=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((n=(m=d.n<0)?s:t.call(r,d))!==i)break}catch(n){a=e,c=1,s=n}finally{l=1}}return{value:n,done:m}}}(t,o,a),!0),l}var i={};function c(){}function s(){}function l(){}n=Object.getPrototypeOf;var u=[][r]?n(n([][r]())):(ae(n={},r,function(){return this}),n),m=l.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ae(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,ae(m,"constructor",l),ae(l,"constructor",s),s.displayName="GeneratorFunction",ae(l,o,"GeneratorFunction"),ae(m),ae(m,o,"Generator"),ae(m,r,function(){return this}),ae(m,"toString",function(){return"[object Generator]"}),(oe=function(){return{w:a,m:d}})()}function ae(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ae=function(e,n,t,r){function a(n,t){ae(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},ae(e,n,t,r)}function ie(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,c=[],s=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(c.push(r.value),c.length!==n);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return se(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?se(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}const le=function(e){var n=e.userContext,t=ce((0,r.useState)([]),2),a=t[0],i=t[1],c=ce((0,r.useState)(!0),2),s=c[0],l=c[1];(0,r.useEffect)(function(){u()},[]);var u=function(){var e,n=(e=oe().m(function e(){var n,t,r,o;return oe().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/wp-json/homaye-tabesh/v1/orders/my-orders",{headers:{"X-WP-Nonce":(null===(n=window.homayeParallelUIConfig)||void 0===n?void 0:n.nonce)||""}});case 1:if(!(t=e.v).ok){e.n=3;break}return e.n=2,t.json();case 2:r=e.v,i(r.orders||[]);case 3:e.n=5;break;case 4:e.p=4,o=e.v,console.error("Error fetching orders:",o);case 5:return e.p=5,l(!1),e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}),function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){ie(a,r,o,i,c,"next",e)}function c(e){ie(a,r,o,i,c,"throw",e)}i(void 0)})});return function(){return n.apply(this,arguments)}}(),m=function(e){window.Homa&&window.Homa.emit&&window.Homa.emit("customer:track_order",{orderId:e})};return o().createElement("div",{className:"homa-order-tracker"},o().createElement("div",{className:"homa-tools-header"},o().createElement("h4",null,"ğŸ“¦ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù†"),o().createElement("span",{className:"homa-role-badge customer"},"Ù…Ø´ØªØ±ÛŒ")),o().createElement("div",{className:"homa-welcome-customer"},o().createElement("p",null,"Ø³Ù„Ø§Ù… ",null==n?void 0:n.identity," Ø¹Ø²ÛŒØ²! ğŸ‘‹",o().createElement("br",null),"Ø®ÙˆØ´Ø­Ø§Ù„ÛŒÙ… Ú©Ù‡ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ…ØªÙˆÙ†. Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… ÙˆØ¶Ø¹ÛŒØª Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ Ùˆ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ù…Ø±Ø³ÙˆÙ„Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†Ù….")),o().createElement("div",{className:"homa-quick-actions"},o().createElement("button",{className:"homa-action-button track",onClick:function(){return a.length>0&&m(a[0].id)},disabled:0===a.length},"ğŸšš Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø¢Ø®Ø±ÛŒÙ† Ø³ÙØ§Ø±Ø´"),o().createElement("button",{className:"homa-action-button ticket",onClick:function(){window.Homa&&window.Homa.emit&&window.Homa.emit("customer:create_ticket",{})}},"ğŸ’¬ ØªÛŒÚ©Øª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ")),s?o().createElement("div",{className:"homa-loading"},o().createElement("span",{className:"homa-spinner"}),o().createElement("p",null,"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§...")):0===a.length?o().createElement("div",{className:"homa-empty-orders"},o().createElement("p",null,"Ø´Ù…Ø§ Ù‡Ù†ÙˆØ² Ø³ÙØ§Ø±Ø´ÛŒ Ø«Ø¨Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯."),o().createElement("a",{href:"/shop",className:"homa-browse-button"},"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª")):o().createElement("div",{className:"homa-orders-list"},a.slice(0,3).map(function(e){return o().createElement("div",{key:e.id,className:"homa-order-card"},o().createElement("div",{className:"homa-order-header"},o().createElement("span",{className:"homa-order-number"},"#",e.number),o().createElement("span",{className:"homa-order-status ".concat(e.status)},e.status_label)),o().createElement("div",{className:"homa-order-info"},o().createElement("p",{className:"homa-order-date"},e.date),o().createElement("p",{className:"homa-order-total"},e.total)),o().createElement("div",{className:"homa-order-actions"},o().createElement("button",{onClick:function(){return m(e.id)},className:"homa-order-action-btn"},"Ù¾ÛŒÚ¯ÛŒØ±ÛŒ"),e.can_renew&&o().createElement("button",{onClick:function(){return n=e.id,void(window.Homa&&window.Homa.emit&&window.Homa.emit("customer:renew_invoice",{orderId:n}));var n},className:"homa-order-action-btn renew"},"ØªÙ…Ø¯ÛŒØ¯")))})),a.length>3&&o().createElement("div",{className:"homa-view-all"},o().createElement("a",{href:"/my-account/orders"},"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§")))},ue=function(e){var n=e.detectionReason;return o().createElement("div",{className:"homa-security-warning"},o().createElement("div",{className:"homa-warning-icon"},o().createElement("span",{className:"homa-icon-shield"},"ğŸ›¡ï¸"),o().createElement("span",{className:"homa-icon-warning"},"âš ï¸")),o().createElement("div",{className:"homa-warning-content"},o().createElement("h3",{className:"homa-warning-title"},"Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ"),o().createElement("p",{className:"homa-warning-message"},"Ø¯Ø³ØªØ±Ø³ÛŒ Ø´Ù…Ø§ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù…Ø´Ú©ÙˆÚ© Ù…Ø­Ø¯ÙˆØ¯ Ø´Ø¯Ù‡ Ø§Ø³Øª."),n&&o().createElement("div",{className:"homa-warning-details"},o().createElement("p",{className:"homa-warning-reason"},o().createElement("strong",null,"Ø¯Ù„ÛŒÙ„:")," ",n)),o().createElement("div",{className:"homa-warning-actions"},o().createElement("p",{className:"homa-warning-info"},"Ø¯Ø± ØµÙˆØ±ØªÛŒ Ú©Ù‡ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ Ø§ÛŒÙ† ÛŒÚ© Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³ØªØŒ Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ù…Ø¯ÛŒØ± Ø³Ø§ÛŒØª ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯."),o().createElement("div",{className:"homa-warning-buttons"},o().createElement("a",{href:"/contact",className:"homa-warning-button primary"},"ØªÙ…Ø§Ø³ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ"),o().createElement("button",{onClick:function(){return window.location.reload()},className:"homa-warning-button secondary"},"ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯"))),o().createElement("div",{className:"homa-warning-footer"},o().createElement("p",{className:"homa-warning-note"},"Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¬Ù‡Øª Ø­ÙØ§Ø¸Øª Ø§Ø² Ø§Ù…Ù†ÛŒØª ÙˆØ¨â€ŒØ³Ø§ÛŒØª Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª."))))},me=function(e){return e.userContext,o().createElement("div",{className:"homa-lead-generator"},o().createElement("div",{className:"homa-tools-header"},o().createElement("h4",null,"ğŸŒŸ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ Ø¨Ù‡ Ú†Ø§Ù¾Ú©Ùˆ"),o().createElement("span",{className:"homa-role-badge guest"},"Ù…ÛŒÙ‡Ù…Ø§Ù†")),o().createElement("div",{className:"homa-welcome-guest"},o().createElement("div",{className:"homa-greeting-icon"},"ğŸ‘‹"),o().createElement("p",null,"Ø³Ù„Ø§Ù…! Ø¨Ù‡ Ú†Ø§Ù¾Ú©Ùˆ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯",o().createElement("br",null),"Ù…Ù† Ù‡Ù…Ø§ Ù‡Ø³ØªÙ…ØŒ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø´Ù…Ø§. Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ø¯Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø­ØµÙˆÙ„Ø§ØªØŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªÛŒØ±Ø§Ú˜ Ùˆ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨Ø§ Ø®Ø¯Ù…Ø§Øª Ú©Ù…Ú©ØªØ§Ù† Ú©Ù†Ù….")),o().createElement("div",{className:"homa-guest-actions"},o().createElement("button",{className:"homa-guest-button primary",onClick:function(){window.Homa&&window.Homa.emit&&window.Homa.emit("guest:show_services",{})}},o().createElement("span",{className:"homa-button-icon"},"ğŸ”"),o().createElement("span",{className:"homa-button-text"},"Ù…Ø¹Ø±ÙÛŒ Ø®Ø¯Ù…Ø§Øª Ú†Ø§Ù¾Ú©Ùˆ")),o().createElement("button",{className:"homa-guest-button secondary",onClick:function(){window.Homa&&window.Homa.emit&&window.Homa.emit("guest:calculate_tirage",{})}},o().createElement("span",{className:"homa-button-icon"},"ğŸ“š"),o().createElement("span",{className:"homa-button-text"},"Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªÛŒØ±Ø§Ú˜ Ú©ØªØ§Ø¨")),o().createElement("button",{className:"homa-guest-button secondary",onClick:function(){window.location.href="/shop"}},o().createElement("span",{className:"homa-button-icon"},"ğŸ›ï¸"),o().createElement("span",{className:"homa-button-text"},"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª"))),o().createElement("div",{className:"homa-registration-prompt"},o().createElement("div",{className:"homa-prompt-content"},o().createElement("p",{className:"homa-prompt-title"},"ğŸ’¡ Ø¹Ø¶ÙˆÛŒØª Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨ÛŒØ´ØªØ±"),o().createElement("p",{className:"homa-prompt-text"},"Ø¨Ø§ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø± Ú†Ø§Ù¾Ú©ÙˆØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø§Ù…Ú©Ø§Ù†Ø§Øª ÙˆÛŒÚ˜Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:"),o().createElement("ul",{className:"homa-benefits-list"},o().createElement("li",null,"Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø³ÙØ§Ø±Ø´Ø§Øª"),o().createElement("li",null,"Ø¯Ø±ÛŒØ§ÙØª ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡"),o().createElement("li",null,"Ø°Ø®ÛŒØ±Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§"),o().createElement("li",null,"Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ")),o().createElement("button",{className:"homa-register-button",onClick:function(){window.Homa&&window.Homa.emit&&window.Homa.emit("lead:start_otp_registration",{})}},"Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø³Ø±ÛŒØ¹ (Ø¨Ø§ Ú©Ø¯ ÛŒÚ©Ø¨Ø§Ø± Ù…ØµØ±Ù)"))),o().createElement("div",{className:"homa-guest-help"},o().createElement("p",{className:"homa-help-text"},"Ø³ÙˆØ§Ù„ Ø¯Ø§Ø±ÛŒØ¯ØŸ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ø§ÛŒÙ† Ú†Øª Ø³ÙˆØ§Ù„ Ø¨Ù¾Ø±Ø³ÛŒØ¯ ÛŒØ§ Ø§Ø² Ù…Ù†ÙˆÙ‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.")))};function de(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return fe(l,"_invoke",function(t,r,o){var a,c,s,l=0,u=o||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,c=0,s=e,d.n=t,i}};function f(t,r){for(c=t,s=r,n=0;!m&&l&&!o&&n<u.length;n++){var o,a=u[n],f=d.p,p=a[2];t>3?(o=p===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(c=0,d.v=r,d.n=a[1]):f<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,d.n=p,c=0))}if(o||t>1)return i;throw m=!0,r}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,s=p;(n=c<2?e:s)||!m;){a||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(l=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((n=(m=d.n<0)?s:t.call(r,d))!==i)break}catch(n){a=e,c=1,s=n}finally{l=1}}return{value:n,done:m}}}(t,o,a),!0),l}var i={};function c(){}function s(){}function l(){}n=Object.getPrototypeOf;var u=[][r]?n(n([][r]())):(fe(n={},r,function(){return this}),n),m=l.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,fe(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,fe(m,"constructor",l),fe(l,"constructor",s),s.displayName="GeneratorFunction",fe(l,o,"GeneratorFunction"),fe(m),fe(m,o,"Generator"),fe(m,r,function(){return this}),fe(m,"toString",function(){return"[object Generator]"}),(de=function(){return{w:a,m:d}})()}function fe(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}fe=function(e,n,t,r){function a(n,t){fe(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},fe(e,n,t,r)}function pe(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function he(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){pe(a,r,o,i,c,"next",e)}function c(e){pe(a,r,o,i,c,"throw",e)}i(void 0)})}}function be(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,c=[],s=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(c.push(r.value),c.length!==n);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return ge(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ge(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}const ve=function(){var e=be((0,r.useState)(!1),2),n=e[0],t=e[1],a=be((0,r.useState)(null),2),i=a[0],c=a[1],s=be((0,r.useState)(!0),2),l=s[0],u=s[1],m=y(),d=m.messages,f=m.addMessage,p=m.userPersona,h=m.setUserPersona,b=m.setIsTyping,g=(0,r.useRef)(null),v=x();(0,r.useEffect)(function(){var e=function(e){t(e.detail.isOpen)};return document.addEventListener("homa:toggle-sidebar",e),S(),N(),window.Homa&&window.Homa.emit&&window.Homa.emit("react:ready",{timestamp:Date.now()}),function(){document.removeEventListener("homa:toggle-sidebar",e)}},[]),w("site:input_change",function(e){console.log("[Homa React] Site input changed:",e),e.meaning&&e.value&&(Date.now(),"Ø¯Ø± Ø­Ø§Ù„ ØªØ­Ù„ÛŒÙ„ ".concat(e.meaning,": ").concat(e.value,"..."),new Date)}),w("ai:processing",function(e){b(e.processing||!1)}),w("ai:response_received",function(e){if(e&&e.text){var n={id:Date.now(),type:"assistant",content:e.text,timestamp:new Date,actions:e.actions||[]};f(n)}}),(0,r.useEffect)(function(){E()},[d]);var E=function(){var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},S=function(){try{var e=localStorage.getItem("homa_chat_history");if(e){var n=JSON.parse(e);n.messages&&Array.isArray(n.messages)&&n.messages.forEach(function(e){return f(e)}),n.persona&&h(n.persona)}}catch(e){console.error("Failed to load chat history:",e)}},N=function(){var e=he(de().m(function e(){var n,t,r,o,a;return de().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/wp-json/homaye-tabesh/v1/capabilities/context",{headers:{"X-WP-Nonce":(null===(n=window.homayeParallelUIConfig)||void 0===n?void 0:n.nonce)||""}});case 1:if(!(t=e.v).ok){e.n=3;break}return e.n=2,t.json();case 2:(r=e.v).success&&(c(r.context),0===d.length&&r.welcome_message&&(o={id:Date.now(),type:"assistant",content:r.welcome_message,timestamp:new Date,actions:r.suggested_actions||[]},f(o)));case 3:e.n=5;break;case 4:e.p=4,a=e.v,console.error("Error fetching user role context:",a);case 5:return e.p=5,u(!1),e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)(function(){d.length>0&&function(){try{var e={messages:d,persona:p,timestamp:Date.now()};localStorage.setItem("homa_chat_history",JSON.stringify(e))}catch(e){console.error("Failed to save chat history:",e)}}()},[d,p]);var k=function(){var e=he(de().m(function e(n){var t,r,o,a,i,c,s,l,u,m;return de().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t={id:Date.now(),type:"user",content:n,timestamp:new Date},f(t),v("chat:user_message",{message:n}),v("ai:processing",{processing:!0}),e.p=1,null!==(r=window.homayeParallelUIConfig)&&void 0!==r&&r.nonce){e.n=2;break}throw new Error("Ø§Ù…Ù†ÛŒØª: Ù†Ø´Ø³Øª Ø´Ù…Ø§ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ú©Ù†ÛŒØ¯.");case 2:return a=(null===(o=window.Homa)||void 0===o?void 0:o.getState())||{},i=O(),e.n=3,fetch("/wp-json/homaye/v1/ai/chat",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.homayeParallelUIConfig.nonce},body:JSON.stringify({message:n,persona:p,context:{page:window.location.pathname,formData:i,currentInput:a.currentUserInput,pageMap:a.pageMap}})});case 3:return c=e.v,e.n=4,c.json();case 4:s=e.v,v("ai:processing",{processing:!1}),s.success&&(l={id:Date.now()+1,type:"assistant",content:s.response,timestamp:new Date,actions:s.actions||[]},f(l),v("ai:response_received",{text:s.response,actions:s.actions,commands:s.commands}),s.actions&&Array.isArray(s.actions)&&s.actions.forEach(function(e){v("ai:command",e)}),s.commands&&Array.isArray(s.commands)&&s.commands.forEach(function(e){v("ai:command",e)})),e.n=6;break;case 5:e.p=5,m=e.v,console.error("Failed to send message:",m),v("ai:processing",{processing:!1}),u={id:Date.now()+1,type:"assistant",content:"Ù…ØªØ£Ø³ÙÙ…ØŒ Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.",timestamp:new Date},f(u);case 6:return e.a(2)}},e,null,[[1,5]])}));return function(n){return e.apply(this,arguments)}}(),O=function(){var e={};return document.querySelectorAll("#homa-site-view input, #homa-site-view select, #homa-site-view textarea").forEach(function(n){n.name&&(e[n.name]=n.value)}),e},j=function(){if(l)return o().createElement("div",{className:"homa-role-loading"},o().createElement("span",{className:"homa-spinner"}),o().createElement("p",null,"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ..."));if(!i)return null;switch(i.role){case"admin":return o().createElement(re,{userContext:i});case"customer":return o().createElement(le,{userContext:i});case"intruder":return o().createElement(ue,{detectionReason:i.detection_reason});default:return o().createElement(me,{userContext:i})}};return o().createElement("div",{className:"homa-sidebar-container ".concat(n?"open":"")},o().createElement("div",{className:"homa-sidebar-header"},o().createElement("div",{className:"homa-avatar"},o().createElement("span",{className:"homa-avatar-icon"},"ğŸ¤–")),o().createElement("div",{className:"homa-header-text"},o().createElement("h3",null,"Ù‡Ù…Ø§ÛŒ ØªØ§Ø¨Ø´"),o().createElement("p",null,"Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ú†Ø§Ù¾")),o().createElement("button",{className:"homa-close-btn",onClick:function(){document.body.classList.remove("homa-open"),t(!1),v("sidebar:close_requested",{})},"aria-label":"Ø¨Ø³ØªÙ†"},"âœ•")),i&&"intruder"!==i.role&&o().createElement("div",{className:"homa-role-tools-section"},j()),i&&"intruder"===i.role?o().createElement("div",{className:"homa-sidebar-content intruder-blocked"},j()):o().createElement(o().Fragment,null,o().createElement("div",{className:"homa-sidebar-content"},o().createElement(P,{messages:d}),o().createElement("div",{ref:g}),d.length<=2&&o().createElement(te,null)),o().createElement(D,{persona:p,onChipClick:function(e){"string"==typeof e?k(e):e.message&&k(e.message)}}),o().createElement(C,{onSendMessage:k})))};var ye=t(309),we={};we.styleTagTransform=$(),we.setAttributes=W(),we.insert=F().bind(null,"head"),we.domAPI=G(),we.insertStyleElement=q(),z()(ye.A,we),ye.A&&ye.A.locals&&ye.A.locals,window.initHomaParallelUI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(void 0!==window.React&&void 0!==window.ReactDOM){window.HomaOrchestrator&&!window.HomaOrchestrator.initialized&&(console.log("[Homa] Waiting for orchestrator initialization..."),window.HomaOrchestrator.init());var n=document.getElementById("homa-sidebar-view");if(!n){if(console.warn("[Homa] Sidebar container not found (attempt ".concat(e+1,"/").concat(3,")")),window.HomaOrchestrator&&window.HomaOrchestrator.createFallbackSidebar&&(window.HomaOrchestrator.createFallbackSidebar(),n=document.getElementById("homa-sidebar-view")),!n&&e<3)return console.log("[Homa] Retrying initialization in ".concat(200,"ms...")),void setTimeout(function(){window.initHomaParallelUI(e+1)},200);if(!n)return void console.error("[Homa] Failed to create sidebar container after all retries. Check console for errors.")}try{window.ReactDOM.createRoot(document.getElementById("homa-sidebar-view")).render(window.React.createElement(ve)),console.log("[Homa] React sidebar initialized successfully")}catch(e){console.error("[Homa] Initialization error:",e);var t=document.getElementById("homa-sidebar-view");t&&(t.innerHTML='\n                <div style="padding: 20px; text-align: center; color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px; margin: 20px;">\n                    <h3>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‡Ù…Ø§</h3>\n                    <p>Ù„Ø·ÙØ§Ù‹ ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ú©Ù†ÛŒØ¯. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.</p>\n                </div>\n            ')}}else{console.error("[Homa] React or ReactDOM not loaded. Please check CDN availability.");var r=document.getElementById("homa-sidebar-view");r&&(r.innerHTML='\n                <div style="padding: 20px; text-align: center; color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px; margin: 20px;">\n                    <h3>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‡Ù…Ø§</h3>\n                    <p>Ù„Ø·ÙØ§Ù‹ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ùˆ ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ú©Ù†ÛŒØ¯.</p>\n                </div>\n            ')}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){window.initHomaParallelUI&&window.initHomaParallelUI()},100)}):setTimeout(function(){window.initHomaParallelUI&&window.initHomaParallelUI()},100),window.HomaSidebar={}})();